#!/usr/bin/env zsh

if [ -z "$1" ] ; then
    echo 'Usage: gem_sync <old_ruby_version>'
    exit 1
fi

OLD="$1"
NEW="$(rbenv global)"

rbenv sh-shell $1
GEMS="$(gem list --no-versions --no-verbose)"
rbenv sh-shell --unset

echo "Gems to install: $GEMS"

for i in $GEMS ; do
    gem install $i
done

